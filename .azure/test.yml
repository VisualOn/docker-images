parameters:
  image: ''

steps:
  - bash: |
      if [ -z "$SOLUTION" ]; then
        echo "##vso[task.logissue type=error;]Missing template parameter \"image\""
        echo "##vso[task.complete result=Failed;]"
      fi
    env:
      SOLUTION: ${{ parameters.image }}
    displayName: Check for required parameters

  - ${{ if startsWith(parameters.image, 'dotnet-') }}:
    - script: docker run --rm -t visualon/images:${{ parameters.image }} dotnet --info 
      displayName: Test image

  - ${{ if eq(parameters.image, 'renovate') }}:
    - script: docker run --rm -t visualon/images:${{ parameters.image }} renovate --version 
      displayName: Test image
